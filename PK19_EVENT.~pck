CREATE OR REPLACE PACKAGE PK19_EVENT
IS
    --
    -- Пакет для работы с объектом "СОБЫТИЕ", таблицы:
    -- event_t
    --
    -- ==============================================================================
    c_PkgName   constant varchar2(30) := 'PK19_EVENT';
    -- ==============================================================================
    c_RET_OK    constant integer := 0;
    c_RET_ER		constant integer :=-1;
    
    type t_refc is ref cursor;
    
    -- создание события (event), возвращает:
    --   - положительное - ID события (event_id), 
    --   - отрицательное - id сообщения об ошибе в L01
    FUNCTION New_event (
                   p_bill_id       IN INTEGER,   -- ID счета
                   p_item_type_id  IN INTEGER,   -- ID типа позиции счета
                   p_order_id      IN INTEGER,   -- ID заказа
                   p_service_id    IN INTEGER,   -- ID усдуги
                   p_subserv_id    IN INTEGER,   -- ID компонента услуги
                   p_item_total    IN NUMBER,    -- общая сумма на позиции счета
                   p_status        IN VARCHAR2   -- статус позиции счета
               ) RETURN INTEGER;
    
    -- Пример функции
    FUNCTION fn_sample RETURN INTEGER;
    
END PK19_EVENT;
/
CREATE OR REPLACE PACKAGE BODY PK19_EVENT
IS

-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
-- Пример функции
-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
FUNCTION fn_sample RETURN INTEGER
IS
    v_prcName    CONSTANT VARCHAR2(30) := 'fn_sample';
    v_retcode    INTEGER := 0;
BEGIN
    RETURN v_retcode;
EXCEPTION
    WHEN OTHERS THEN
        v_retcode := Pk01_SysLog.write_Error('ERROR', c_PkgName||'.'||v_prcName);
        RETURN(-v_retcode);
END;

END PK19_EVENT;
/
